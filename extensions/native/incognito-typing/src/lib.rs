use dioxus::prelude::*;
use state::STATE;
use utils::extensions::{BasicExtension, ExtensionInfo, ExtensionType};

#[allow(non_snake_case)]
fn KeyboardIcon(cx: Scope) -> Element {
    cx.render(rsx! {
        svg {
            view_box: "0 0 28 19",
            width: "20",
            height: "20",
            path {
                stroke: "none",
                fill: "#EEF0F2",
                d: "M13 2.5H12C11.72 2.5 11.5 2.72 11.5 3V4C11.5 4.28 11.72 4.5 12 4.5H13C13.28 4.5 13.5 4.28 13.5 4V3C13.5 2.72 13.28 2.5 13 2.5ZM10 2.5H9C8.72 2.5 8.5 2.72 8.5 3V4C8.5 4.28 8.72 4.5 9 4.5H10C10.28 4.5 10.5 4.28 10.5 4V3C10.5 2.72 10.28 2.5 10 2.5ZM25 14.5H22C21.72 14.5 21.5 14.72 21.5 15V16C21.5 16.28 21.72 16.5 22 16.5H25C25.28 16.5 25.5 16.28 25.5 16V15C25.5 14.72 25.28 14.5 25 14.5ZM25 11.5H21C20.72 11.5 20.5 11.72 20.5 12V13C20.5 13.28 20.72 13.5 21 13.5H25C25.28 13.5 25.5 13.28 25.5 13V12C25.5 11.72 25.28 11.5 25 11.5ZM19 2.5H18C17.72 2.5 17.5 2.72 17.5 3V4C17.5 4.28 17.72 4.5 18 4.5H19C19.28 4.5 19.5 4.28 19.5 4V3C19.5 2.72 19.28 2.5 19 2.5ZM20 5.5H19C18.72 5.5 18.5 5.72 18.5 6V7C18.5 7.28 18.72 7.5 19 7.5H20C20.28 7.5 20.5 7.28 20.5 7V6C20.5 5.72 20.28 5.5 20 5.5ZM16 2.5H15C14.72 2.5 14.5 2.72 14.5 3V4C14.5 4.28 14.72 4.5 15 4.5H16C16.28 4.5 16.5 4.28 16.5 4V3C16.5 2.72 16.28 2.5 16 2.5ZM25 8.5H23C22.72 8.5 22.5 8.72 22.5 9V10C22.5 10.28 22.72 10.5 23 10.5H25C25.28 10.5 25.5 10.28 25.5 10V9C25.5 8.72 25.28 8.5 25 8.5ZM25 5.5H22C21.72 5.5 21.5 5.72 21.5 6V7C21.5 7.28 21.72 7.5 22 7.5H25C25.28 7.5 25.5 7.28 25.5 7V6C25.5 5.72 25.28 5.5 25 5.5ZM12 8.5H11C10.72 8.5 10.5 8.72 10.5 9V10C10.5 10.28 10.72 10.5 11 10.5H12C12.28 10.5 12.5 10.28 12.5 10V9C12.5 8.72 12.28 8.5 12 8.5ZM7 2.5H6C5.72 2.5 5.5 2.72 5.5 3V4C5.5 4.28 5.72 4.5 6 4.5H7C7.28 4.5 7.5 4.28 7.5 4V3C7.5 2.72 7.28 2.5 7 2.5ZM9 8.5H8C7.72 8.5 7.5 8.72 7.5 9V10C7.5 10.28 7.72 10.5 8 10.5H9C9.28 10.5 9.5 10.28 9.5 10V9C9.5 8.72 9.28 8.5 9 8.5ZM25 2.5H24C23.72 2.5 23.5 2.72 23.5 3V4C23.5 4.28 23.72 4.5 24 4.5H25C25.28 4.5 25.5 4.28 25.5 4V3C25.5 2.72 25.28 2.5 25 2.5ZM15 8.5H14C13.72 8.5 13.5 8.72 13.5 9V10C13.5 10.28 13.72 10.5 14 10.5H15C15.28 10.5 15.5 10.28 15.5 10V9C15.5 8.72 15.28 8.5 15 8.5ZM22 2.5H21C20.72 2.5 20.5 2.72 20.5 3V4C20.5 4.28 20.72 4.5 21 4.5H22C22.28 4.5 22.5 4.28 22.5 4V3C22.5 2.72 22.28 2.5 22 2.5ZM4 2.5H3C2.72 2.5 2.5 2.72 2.5 3V4C2.5 4.28 2.72 4.5 3 4.5H4C4.28 4.5 4.5 4.28 4.5 4V3C4.5 2.72 4.28 2.5 4 2.5ZM8 5.5H7C6.72 5.5 6.5 5.72 6.5 6V7C6.5 7.28 6.72 7.5 7 7.5H8C8.28 7.5 8.5 7.28 8.5 7V6C8.5 5.72 8.28 5.5 8 5.5ZM5 5.5H3C2.72 5.5 2.5 5.72 2.5 6V7C2.5 7.28 2.72 7.5 3 7.5H5C5.28 7.5 5.5 7.28 5.5 7V6C5.5 5.72 5.28 5.5 5 5.5ZM10 11.5H9C8.72 11.5 8.5 11.72 8.5 12V13C8.5 13.28 8.72 13.5 9 13.5H10C10.28 13.5 10.5 13.28 10.5 13V12C10.5 11.72 10.28 11.5 10 11.5ZM17 5.5H16C15.72 5.5 15.5 5.72 15.5 6V7C15.5 7.28 15.72 7.5 16 7.5H17C17.28 7.5 17.5 7.28 17.5 7V6C17.5 5.72 17.28 5.5 17 5.5ZM11 5.5H10C9.72 5.5 9.5 5.72 9.5 6V7C9.5 7.28 9.72 7.5 10 7.5H11C11.28 7.5 11.5 7.28 11.5 7V6C11.5 5.72 11.28 5.5 11 5.5ZM14 5.5H13C12.72 5.5 12.5 5.72 12.5 6V7C12.5 7.28 12.72 7.5 13 7.5H14C14.28 7.5 14.5 7.28 14.5 7V6C14.5 5.72 14.28 5.5 14 5.5ZM19 11.5H18C17.72 11.5 17.5 11.72 17.5 12V13C17.5 13.28 17.72 13.5 18 13.5H19C19.28 13.5 19.5 13.28 19.5 13V12C19.5 11.72 19.28 11.5 19 11.5ZM16 11.5H15C14.72 11.5 14.5 11.72 14.5 12V13C14.5 13.28 14.72 13.5 15 13.5H16C16.28 13.5 16.5 13.28 16.5 13V12C16.5 11.72 16.28 11.5 16 11.5ZM6 14.5H3C2.72 14.5 2.5 14.72 2.5 15V16C2.5 16.28 2.72 16.5 3 16.5H6C6.28 16.5 6.5 16.28 6.5 16V15C6.5 14.72 6.28 14.5 6 14.5ZM13 11.5H12C11.72 11.5 11.5 11.72 11.5 12V13C11.5 13.28 11.72 13.5 12 13.5H13C13.28 13.5 13.5 13.28 13.5 13V12C13.5 11.72 13.28 11.5 13 11.5ZM6 8.5H3C2.72 8.5 2.5 8.72 2.5 9V10C2.5 10.28 2.72 10.5 3 10.5H6C6.28 10.5 6.5 10.28 6.5 10V9C6.5 8.72 6.28 8.5 6 8.5ZM21 8.5H20C19.72 8.5 19.5 8.72 19.5 9V10C19.5 10.28 19.72 10.5 20 10.5H21C21.28 10.5 21.5 10.28 21.5 10V9C21.5 8.72 21.28 8.5 21 8.5ZM18 8.5H17C16.72 8.5 16.5 8.72 16.5 9V10C16.5 10.28 16.72 10.5 17 10.5H18C18.28 10.5 18.5 10.28 18.5 10V9C18.5 8.72 18.28 8.5 18 8.5ZM20 14.5H8C7.72 14.5 7.5 14.72 7.5 15V16C7.5 16.28 7.72 16.5 8 16.5H20C20.28 16.5 20.5 16.28 20.5 16V15C20.5 14.72 20.28 14.5 20 14.5ZM7 11.5H3C2.72 11.5 2.5 11.72 2.5 12V13C2.5 13.28 2.72 13.5 3 13.5H7C7.28 13.5 7.5 13.28 7.5 13V12C7.5 11.72 7.28 11.5 7 11.5ZM3 19H25C26.65 19 28 17.59 28 15.86V3.14C28 1.41 26.65 0 25 0H3C1.35 0 0 1.41 0 3.14V15.86C0 17.59 1.35 19 3 19ZM25 1.5C25.83 1.5 26.5 2.23 26.5 3.14V15.86C26.5 16.76 25.83 17.5 25 17.5H3C2.17 17.5 1.5 16.77 1.5 15.86V3.14C1.5 2.24 2.17 1.5 3 1.5H25Z",
            },
        }

    })
}

#[allow(non_snake_case)]
fn KeyboardOffIcon(cx: Scope) -> Element {
    cx.render(rsx!{
        svg {
            view_box: "0 0 28 25",
            width: "20",
            height: "20",
            path {
                stroke: "none",
                fill: "#EEF0F2",
                d: "M7.5 11.5075C7.5 11.2275 7.72 11.0075 8 11.0075H9C9.28 11.0075 9.5 11.2275 9.5 11.5075V12.5075C9.5 12.7875 9.28 13.0075 9 13.0075H8C7.72 13.0075 7.5 12.7875 7.5 12.5075V11.5075ZM12 14.0075C11.72 14.0075 11.5 14.2275 11.5 14.5075V15.5075C11.5 15.7875 11.72 16.0075 12 16.0075H13C13.28 16.0075 13.5 15.7875 13.5 15.5075V14.5075C13.5 14.2275 13.28 14.0075 13 14.0075H12ZM16 16.0075C16 16.0075 16.01 16.0075 16.02 16.0075L14.5 14.4875C14.5 14.4875 14.5 14.4975 14.5 14.5075V15.5075C14.5 15.7875 14.72 16.0075 15 16.0075H16ZM2.5 6.5075C2.5 6.7875 2.72 7.0075 3 7.0075H4C4.28 7.0075 4.5 6.7875 4.5 6.5075V5.5075C4.5 5.2275 4.28 5.0075 4 5.0075H3C2.72 5.0075 2.5 5.2275 2.5 5.5075V6.5075ZM25.5 8.5075C25.5 8.2275 25.28 8.0075 25 8.0075H22C21.72 8.0075 21.5 8.2275 21.5 8.5075V9.5075C21.5 9.7875 21.72 10.0075 22 10.0075H25C25.28 10.0075 25.5 9.7875 25.5 9.5075V8.5075ZM2.5 9.5075C2.5 9.7875 2.72 10.0075 3 10.0075H5C5.28 10.0075 5.5 9.7875 5.5 9.5075V8.5075C5.5 8.2275 5.28 8.0075 5 8.0075H3C2.72 8.0075 2.5 8.2275 2.5 8.5075V9.5075ZM7.02 7.0075L5.5 5.4875C5.5 5.4875 5.5 5.4975 5.5 5.5075V6.5075C5.5 6.7875 5.72 7.0075 6 7.0075H7C7 7.0075 7.01 7.0075 7.02 7.0075ZM8.5 8.5075C8.5 8.5075 8.5 8.4875 8.5 8.4775L8.04 8.0175C8.04 8.0175 8.02 8.0175 8.01 8.0175H7.01C6.73 8.0175 6.51 8.2375 6.51 8.5175V9.5175C6.51 9.7975 6.73 10.0175 7.01 10.0175H8.01C8.29 10.0175 8.51 9.7975 8.51 9.5175V8.5175L8.5 8.5075ZM2.5 17.5075V18.5075C2.5 18.7875 2.72 19.0075 3 19.0075H6C6.28 19.0075 6.5 18.7875 6.5 18.5075V17.5075C6.5 17.2275 6.28 17.0075 6 17.0075H3C2.72 17.0075 2.5 17.2275 2.5 17.5075ZM12.5 12.5075V12.4775L11.03 11.0075H11C10.72 11.0075 10.5 11.2275 10.5 11.5075V12.5075C10.5 12.7875 10.72 13.0075 11 13.0075H12C12.28 13.0075 12.5 12.7875 12.5 12.5075ZM2.5 15.5075C2.5 15.7875 2.72 16.0075 3 16.0075H7C7.28 16.0075 7.5 15.7875 7.5 15.5075V14.5075C7.5 14.2275 7.28 14.0075 7 14.0075H3C2.72 14.0075 2.5 14.2275 2.5 14.5075V15.5075ZM8 19.0075H19.03L17.03 17.0075H8C7.72 17.0075 7.5 17.2275 7.5 17.5075V18.5075C7.5 18.7875 7.72 19.0075 8 19.0075ZM10 14.0075H9C8.72 14.0075 8.5 14.2275 8.5 14.5075V15.5075C8.5 15.7875 8.72 16.0075 9 16.0075H10C10.28 16.0075 10.5 15.7875 10.5 15.5075V14.5075C10.5 14.2275 10.28 14.0075 10 14.0075ZM25.5 6.5075V5.5075C25.5 5.2275 25.28 5.0075 25 5.0075H24C23.72 5.0075 23.5 5.2275 23.5 5.5075V6.5075C23.5 6.7875 23.72 7.0075 24 7.0075H25C25.28 7.0075 25.5 6.7875 25.5 6.5075ZM9.5 9.5075C9.5 9.7875 9.72 10.0075 10 10.0075H10.03L9.5 9.4775V9.5075ZM2.5 12.5075C2.5 12.7875 2.72 13.0075 3 13.0075H6C6.28 13.0075 6.5 12.7875 6.5 12.5075V11.5075C6.5 11.2275 6.28 11.0075 6 11.0075H3C2.72 11.0075 2.5 11.2275 2.5 11.5075V12.5075ZM25.5 14.5075C25.5 14.2275 25.28 14.0075 25 14.0075H21C20.72 14.0075 20.5 14.2275 20.5 14.5075V15.5075C20.5 15.7875 20.72 16.0075 21 16.0075H25C25.28 16.0075 25.5 15.7875 25.5 15.5075V14.5075ZM25.5 11.5075C25.5 11.2275 25.28 11.0075 25 11.0075H23C22.72 11.0075 22.5 11.2275 22.5 11.5075V12.5075C22.5 12.7875 22.72 13.0075 23 13.0075H25C25.28 13.0075 25.5 12.7875 25.5 12.5075V11.5075ZM20.5 5.5075V6.5075C20.5 6.7875 20.72 7.0075 21 7.0075H22C22.28 7.0075 22.5 6.7875 22.5 6.5075V5.5075C22.5 5.2275 22.28 5.0075 22 5.0075H21C20.72 5.0075 20.5 5.2275 20.5 5.5075ZM25.5 17.5075C25.5 17.2275 25.28 17.0075 25 17.0075H22C21.79 17.0075 21.62 17.1375 21.54 17.3075L23.24 19.0075H25C25.28 19.0075 25.5 18.7875 25.5 18.5075V17.5075ZM10 5.0075H9.24L10.5 6.2675V5.5075C10.5 5.2275 10.28 5.0075 10 5.0075ZM0 5.6375V18.3575C0 20.0875 1.35 21.4975 3 21.4975H21.52L20.02 19.9975H3C2.17 19.9975 1.5 19.2675 1.5 18.3575V5.6375C1.5 4.7375 2.17 3.9975 3 3.9975H4.03L2.58 2.5475C1.12 2.7675 0 4.0675 0 5.6375ZM24.23 19.9975L25.65 21.4175C26.99 21.1075 28 19.8575 28 18.3575V5.6375C28 3.9075 26.65 2.4975 25 2.4975H6.74L8.24 3.9975H25C25.83 3.9975 26.5 4.7275 26.5 5.6375V18.3575C26.5 19.2575 25.83 19.9975 25 19.9975H24.23ZM20 7.9975H19C18.72 7.9975 18.5 8.2175 18.5 8.4975V9.4975C18.5 9.7775 18.72 9.9975 19 9.9975H20C20.28 9.9975 20.5 9.7775 20.5 9.4975V8.4975C20.5 8.2175 20.28 7.9975 20 7.9975ZM17.5 5.4975V6.4975C17.5 6.7775 17.72 6.9975 18 6.9975H19C19.28 6.9975 19.5 6.7775 19.5 6.4975V5.4975C19.5 5.2175 19.28 4.9975 19 4.9975H18C17.72 4.9975 17.5 5.2175 17.5 5.4975ZM17 7.9975H16C15.72 7.9975 15.5 8.2175 15.5 8.4975V9.4975C15.5 9.7775 15.72 9.9975 16 9.9975H17C17.28 9.9975 17.5 9.7775 17.5 9.4975V8.4975C17.5 8.2175 17.28 7.9975 17 7.9975ZM14.5 5.4975V6.4975C14.5 6.7775 14.72 6.9975 15 6.9975H16C16.28 6.9975 16.5 6.7775 16.5 6.4975V5.4975C16.5 5.2175 16.28 4.9975 16 4.9975H15C14.72 4.9975 14.5 5.2175 14.5 5.4975ZM13 6.9975C13.28 6.9975 13.5 6.7775 13.5 6.4975V5.4975C13.5 5.2175 13.28 4.9975 13 4.9975H12C11.72 4.9975 11.5 5.2175 11.5 5.4975V6.4975C11.5 6.7775 11.72 6.9975 12 6.9975H13ZM18.24 13.9975L19.5 15.2575V14.4975C19.5 14.2175 19.28 13.9975 19 13.9975H18.24ZM14 7.9975H13C12.79 7.9975 12.62 8.1275 12.54 8.2975L14.2 9.9575C14.38 9.8775 14.5 9.7075 14.5 9.4975V8.4975C14.5 8.2175 14.28 7.9975 14 7.9975ZM18 12.9975C18.28 12.9975 18.5 12.7775 18.5 12.4975V11.4975C18.5 11.2175 18.28 10.9975 18 10.9975H17C16.72 10.9975 16.5 11.2175 16.5 11.4975V12.2575L17.24 12.9975H18ZM19.5 12.4975C19.5 12.7775 19.72 12.9975 20 12.9975H21C21.28 12.9975 21.5 12.7775 21.5 12.4975V11.4975C21.5 11.2175 21.28 10.9975 21 10.9975H20C19.72 10.9975 19.5 11.2175 19.5 11.4975V12.4975ZM27.56 24.3375C27.85 24.0475 27.85 23.5675 27.56 23.2775L4.5 0.2175C4.21 -0.0725 3.73 -0.0725 3.44 0.2175C3.15 0.5075 3.15 0.9875 3.44 1.2775L26.5 24.3375C26.79 24.6275 27.27 24.6275 27.56 24.3375Z",
            },
        }

    })
}

pub struct ExtIncognitoTyping;

impl BasicExtension for ExtIncognitoTyping {
    fn info() -> ExtensionInfo {
        ExtensionInfo {
            name: String::from("Incognito Typing"),
            author: String::from("matt@satellite.im"),
            description: String::from("Incognito Typing allows you to disable the typing notification in chat"),
            location: ExtensionType::ChatbarIcon,
        }
    }

    fn render(cx: Scope) -> Element {
        let state = use_atom_ref(&cx, STATE);
        let send_typing = state.read().send_typing;

        let handle_click = move |_| {
            state.write().send_typing = !send_typing;
        };

        cx.render(rsx! {
            div {
                id: "incognito-typing",
                button {
                    onclick: handle_click,
                    class: "button button-secondary button-icon-only ellipsis",
                    match &send_typing {
                        true => rsx! { KeyboardIcon {} },
                        false => rsx! { KeyboardOffIcon {} },
                    }
                }
            }
        })
    }
}
